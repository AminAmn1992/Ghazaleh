<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒÚ¯Ø± Ø§Ù†Ø±Ú˜ÛŒ eprimo</title>
    <style>
        :root {
            --primary: #2c3e50;
            --elec-color: #3498db; 
            --gas-color: #27ae60; 
            --bg: #f4f7f9;
            --card-bg: #ffffff;
            --text-muted: #64748b;
        }

        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: var(--bg); display: flex; justify-content: center; padding: 20px 15px; margin: 0; }
        .app-container { width: 100%; max-width: 550px; }

        .card {
            background: var(--card-bg); border-radius: 20px; padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05); margin-bottom: 30px;
            border: 1px solid #e2e8f0; border-top: 8px solid;
        }

        h2 { 
            margin: 5px 0 20px 0; font-size: 1.2rem; color: var(--primary); 
            display: flex; align-items: center; gap: 10px; padding-bottom: 12px; border-bottom: 2px solid #f1f5f9; 
        }
        
        .input-section { background: #f8fafc; padding: 15px; border-radius: 12px; margin-bottom: 18px; border: 1px solid #edf2f7; }
        .section-title { display: block; font-size: 0.8rem; font-weight: bold; color: var(--text-muted); margin-bottom: 12px; }

        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }

        label { font-size: 0.7rem; color: #94a3b8; margin-bottom: 5px; display: block; text-align: left; direction: ltr; }
        
        input { 
            width: 100%; padding: 12px 8px; border: 1.5px solid #e2e8f0; border-radius: 10px; 
            text-align: center; font-size: 15px; background: white; box-sizing: border-box; 
        }

        button { width: 100%; padding: 16px; color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 5px; transition: 0.3s; }
        .btn-elec { background: var(--elec-color); }
        .btn-gas { background: var(--gas-color); }
        button:active { transform: scale(0.98); }

        .result-box { margin-top: 20px; padding: 20px; border-radius: 15px; display: none; }
        .res-line { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.95rem; }
        .total-row { margin-top: 15px; padding-top: 15px; border-top: 2px dashed #cbd5e0; font-size: 1.2rem; font-weight: bold; }
    </style>
</head>
<body>

<div class="app-container">

    <div class="card" style="border-top-color: var(--primary);">
        <h2>âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªØ¹Ø±ÙÙ‡ (Tarif)</h2>
        <div class="grid-2">
            <div class="input-section">
                <span class="section-title">Ø¨Ø±Ù‚ (Strom)</span>
                <div><label>Grundpreis (â‚¬/Monat)</label><input type="number" id="base_e" value="17.79"></div>
                <div style="margin-top:10px"><label>Arbeitspreis (ct/kWh)</label><input type="number" id="unit_e" value="35.17"></div>
            </div>
            <div class="input-section">
                <span class="section-title">Ú¯Ø§Ø² (Gas)</span>
                <div><label>Grundpreis (â‚¬/Monat)</label><input type="number" id="base_g" value="20.95"></div>
                <div style="margin-top:10px"><label>Arbeitspreis (ct/kWh)</label><input type="number" id="unit_g" value="12.27"></div>
            </div>
        </div>
        <div class="input-section" style="margin-bottom: 0;">
            <span class="section-title">Ø¶Ø±Ø§ÛŒØ¨ ØªØ¨Ø¯ÛŒÙ„ Ú¯Ø§Ø²</span>
            <div class="grid-2">
                <div><label>Brennwert</label><input type="number" id="brenn" value="11.537"></div>
                <div><label>Z-Zahl</label><input type="number" id="zzahl" value="0.9419"></div>
            </div>
        </div>
    </div>

    <div class="card" style="border-top-color: var(--elec-color);">
        <h2 style="color: var(--elec-color);">âš¡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚Ø¨Ø¶ Ø¨Ø±Ù‚ (Strom)</h2>
        <div class="input-section">
            <span class="section-title">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ±Ù‡</span>
            <div class="grid-3">
                <input type="number" id="ey1" placeholder="Year">
                <input type="number" id="em1" placeholder="Month">
                <input type="number" id="ed1" placeholder="Day">
            </div>
            <div style="margin-top: 15px;"><label>ZÃ¤hlerstand (kWh)</label><input type="number" id="er1"></div>
        </div>
        <div class="input-section">
            <span class="section-title">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒØ§Ù† Ø¯ÙˆØ±Ù‡</span>
            <div class="grid-3">
                <input type="number" id="ey2" placeholder="Year">
                <input type="number" id="em2" placeholder="Month">
                <input type="number" id="ed2" placeholder="Day">
            </div>
            <div style="margin-top: 15px;"><label>ZÃ¤hlerstand (kWh)</label><input type="number" id="er2"></div>
        </div>
        <button class="btn-elec" onclick="calculate('elec')">Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙØ§Ú©ØªÙˆØ± Ø¨Ø±Ù‚</button>
        <div id="res_elec" class="result-box" style="background: #e3f2fd; border: 1px solid #bbdefb;"></div>
    </div>

    <div class="card" style="border-top-color: var(--gas-color);">
        <h2 style="color: var(--gas-color);">ğŸ”¥ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚Ø¨Ø¶ Ú¯Ø§Ø² (Gas)</h2>
        <div class="input-section">
            <span class="section-title">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ±Ù‡</span>
            <div class="grid-3">
                <input type="number" id="gy1" placeholder="Year">
                <input type="number" id="gm1" placeholder="Month">
                <input type="number" id="gd1" placeholder="Day">
            </div>
            <div style="margin-top: 15px;"><label>ZÃ¤hlerstand (mÂ³)</label><input type="number" id="gr1"></div>
        </div>
        <div class="input-section">
            <span class="section-title">Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø§ÛŒØ§Ù† Ø¯ÙˆØ±Ù‡</span>
            <div class="grid-3">
                <input type="number" id="gy2" placeholder="Year">
                <input type="number" id="gm2" placeholder="Month">
                <input type="number" id="gd2" placeholder="Day">
            </div>
            <div style="margin-top: 15px;"><label>ZÃ¤hlerstand (mÂ³)</label><input type="number" id="gr2"></div>
        </div>
        <button class="btn-gas" onclick="calculate('gas')">Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙØ§Ú©ØªÙˆØ± Ú¯Ø§Ø²</button>
        <div id="res_gas" class="result-box" style="background: #f0fdf4; border: 1px solid #dcfce7;"></div>
    </div>

</div>

<script>
    function calculate(type) {
        const isGas = type === 'gas';
        const prefix = isGas ? 'g' : 'e';
        const gp = +document.getElementById('base_' + prefix).value;
        const ap = +document.getElementById('unit_' + prefix).value / 100;
        
        const r1 = +document.getElementById(prefix + 'r1').value;
        const r2 = +document.getElementById(prefix + 'r2').value;
        const d1 = new Date(+document.getElementById(prefix + 'y1').value, +document.getElementById(prefix + 'm1').value - 1, +document.getElementById(prefix + 'd1').value);
        const d2 = new Date(+document.getElementById(prefix + 'y2').value, +document.getElementById(prefix + 'm2').value - 1, +document.getElementById(prefix + 'd2').value);

        if (isNaN(d1) || isNaN(d2) || !r1 || !r2) return alert("Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù…ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯.");

        const diffDays = Math.ceil(Math.abs(d2 - d1) / (1000 * 60 * 60 * 24));
        const months = diffDays / 30.42;
        const diffReading = r2 - r1;
        
        let kwh, labelUnit;
        if (isGas) {
            kwh = diffReading * (+document.getElementById('brenn').value) * (+document.getElementById('zzahl').value);
            labelUnit = "mÂ³";
        } else {
            kwh = diffReading;
            labelUnit = "kWh";
        }

        const total = (kwh * ap) + (months * gp);
        const resDiv = document.getElementById('res_' + (isGas ? 'gas' : 'elec'));
        resDiv.style.display = 'block';
        resDiv.innerHTML = `
            <div class="res-line"><span>Ø·ÙˆÙ„ Ø¯ÙˆØ±Ù‡:</span><span style="font-weight:bold">${diffDays} Ø±ÙˆØ²</span></div>
            <div class="res-line"><span>Ø§Ù†Ø±Ú˜ÛŒ Ù…ØµØ±ÙÛŒ:</span><span style="font-weight:bold">${kwh.toFixed(0)} kWh</span></div>
            <div class="res-line total-row" style="color:${isGas?'#166534':'#0d47a1'}"><span>Ù…Ø¨Ù„Øº Ú©Ù„ Ù†Ù‡Ø§ÛŒÛŒ:</span><span>${total.toFixed(2)} â‚¬</span></div>
        `;
        resDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
</script>

</body>
</html>
