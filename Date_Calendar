<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù¾ÛŒØ´Ø±ÙØªÙ‡ ØªØ§Ø±ÛŒØ®</title>
    <script src="https://cdn.jsdelivr.net/npm/jalaali-js/dist/jalaali.js"></script>
    <style>
        :root {
            --primary: #4a90e2; --secondary: #2ecc71;
            --accent1: #9b59b6; --accent2: #f39c12;
            --bg: #f0f2f5;
        }
        body { font-family: Tahoma, sans-serif; background: var(--bg); display: flex; justify-content: center; padding: 15px; margin: 0; }
        .app-container { width: 100%; max-width: 450px; }
        .card { 
            background: white; padding: 20px; border-radius: 20px; 
            box-shadow: 0 8px 20px rgba(0,0,0,0.06); margin-bottom: 20px;
            border-top: 6px solid;
        }
        h2 { text-align: center; font-size: 1.1rem; margin-top: 0; color: #444; }
        .input-row { display: flex; gap: 8px; margin: 15px 0; }
        input { width: 100%; padding: 12px; border: 2px solid #f0f0f0; border-radius: 12px; text-align: center; font-size: 16px; }
        input:focus { border-color: #ddd; outline: none; }
        button { width: 100%; padding: 14px; border: none; border-radius: 12px; color: white; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button:active { transform: scale(0.96); }
        .result { margin-top: 15px; padding: 12px; border-radius: 10px; text-align: center; display: none; background: #f8f9fa; line-height: 1.8; font-weight: bold; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .label-sm { font-size: 0.75rem; color: #888; margin-bottom: 5px; display: block; }
        .highlight { color: #e74c3c; font-size: 1.1rem; }
    </style>
</head>
<body>

<div class="app-container">
    
    <div class="card" style="border-color: var(--primary);">
        <h2>â˜€ï¸ ØªØ¨Ø¯ÛŒÙ„ Ø´Ù…Ø³ÛŒ Ø¨Ù‡ Ù…ÛŒÙ„Ø§Ø¯ÛŒ</h2>
        <div class="input-row">
            <input type="number" id="jy" placeholder="Ø³Ø§Ù„">
            <input type="number" id="jm" placeholder="Ù…Ø§Ù‡">
            <input type="number" id="jd" placeholder="Ø±ÙˆØ²">
        </div>
        <button style="background: var(--primary);" onclick="shToMi()">ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ®</button>
        <div id="resShMi" class="result"></div>
    </div>

    <div class="card" style="border-color: var(--secondary);">
        <h2>â„ï¸ ØªØ¨Ø¯ÛŒÙ„ Ù…ÛŒÙ„Ø§Ø¯ÛŒ Ø¨Ù‡ Ø´Ù…Ø³ÛŒ</h2>
        <div class="input-row">
            <input type="number" id="gy" placeholder="Year">
            <input type="number" id="gm" placeholder="Month">
            <input type="number" id="gd" placeholder="Day">
        </div>
        <button style="background: var(--secondary);" onclick="miToSh()">ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ®</button>
        <div id="resMiSh" class="result"></div>
    </div>

    <div class="card" style="border-color: var(--accent1);">
        <h2>ğŸ“ ÙØ§ØµÙ„Ù‡ Ø¯Ùˆ ØªØ§Ø±ÛŒØ® (Ø´Ù…Ø³ÛŒ)</h2>
        <span class="label-sm">ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹:</span>
        <div class="input-row"><input type="number" id="y1s" placeholder="Ø³Ø§Ù„"><input type="number" id="m1s" placeholder="Ù…Ø§Ù‡"><input type="number" id="d1s" placeholder="Ø±ÙˆØ²"></div>
        <span class="label-sm">ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†:</span>
        <div class="input-row"><input type="number" id="y2s" placeholder="Ø³Ø§Ù„"><input type="number" id="m2s" placeholder="Ù…Ø§Ù‡"><input type="number" id="d2s" placeholder="Ø±ÙˆØ²"></div>
        <button style="background: var(--accent1);" onclick="diffSh()">Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙØ§ØµÙ„Ù‡ Ø¯Ù‚ÛŒÙ‚</button>
        <div id="resDiffSh" class="result"></div>
    </div>

    <div class="card" style="border-color: var(--accent2);">
        <h2>ğŸ“ ÙØ§ØµÙ„Ù‡ Ø¯Ùˆ ØªØ§Ø±ÛŒØ® (Ù…ÛŒÙ„Ø§Ø¯ÛŒ)</h2>
        <span class="label-sm">ØªØ§Ø±ÛŒØ® Ø´Ø±ÙˆØ¹:</span>
        <div class="input-row"><input type="number" id="y1m" placeholder="Year"><input type="number" id="m1m" placeholder="Month"><input type="number" id="d1m" placeholder="Day"></div>
        <span class="label-sm">ØªØ§Ø±ÛŒØ® Ù¾Ø§ÛŒØ§Ù†:</span>
        <div class="input-row"><input type="number" id="y2m" placeholder="Year"><input type="number" id="m2m" placeholder="Month"><input type="number" id="d2m" placeholder="Day"></div>
        <button style="background: var(--accent2);" onclick="diffMi()">Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙØ§ØµÙ„Ù‡ Ø¯Ù‚ÛŒÙ‚</button>
        <div id="resDiffMi" class="result"></div>
    </div>

</div>

<script>
    const weekDays = ["ÛŒÚ©Ø´Ù†Ø¨Ù‡", "Ø¯ÙˆØ´Ù†Ø¨Ù‡", "Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡", "Ú†Ù‡Ø§Ø±Ø´Ù†Ø¨Ù‡", "Ù¾Ù†Ø¬â€ŒØ´Ù†Ø¨Ù‡", "Ø¬Ù…Ø¹Ù‡", "Ø´Ù†Ø¨Ù‡"];

    function getDayName(y, m, d) { return weekDays[new Date(y, m - 1, d).getDay()]; }

    function shToMi() {
        const y = +document.getElementById('jy').value, m = +document.getElementById('jm').value, d = +document.getElementById('jd').value;
        if(y && m && d) {
            const g = jalaali.toGregorian(y, m, d);
            show('resShMi', `ğŸ“… ${g.gy}/${g.gm}/${g.gd}<br>âœ¨ ${getDayName(g.gy, g.gm, g.gd)}`);
        }
    }

    function miToSh() {
        const y = +document.getElementById('gy').value, m = +document.getElementById('gm').value, d = +document.getElementById('gd').value;
        if(y && m && d) {
            const j = jalaali.toJalaali(y, m, d);
            show('resMiSh', `ğŸ“… ${j.jy}/${j.jm}/${j.jd}<br>âœ¨ ${getDayName(y, m, d)}`);
        }
    }

    function diffSh() {
        const y1 = +document.getElementById('y1s').value, m1 = +document.getElementById('m1s').value, d1 = +document.getElementById('d1s').value;
        const y2 = +document.getElementById('y2s').value, m2 = +document.getElementById('m2s').value, d2 = +document.getElementById('d2s').value;
        if(y1 && y2) {
            const g1 = jalaali.toGregorian(y1, m1, d1), g2 = jalaali.toGregorian(y2, m2, d2);
            calcDetailed(new Date(g1.gy, g1.gm-1, g1.gd), new Date(g2.gy, g2.gm-1, g2.gd), 'resDiffSh');
        }
    }

    function diffMi() {
        const y1 = +document.getElementById('y1m').value, m1 = +document.getElementById('m1m').value, d1 = +document.getElementById('d1m').value;
        const y2 = +document.getElementById('y2m').value, m2 = +document.getElementById('m2m').value, d2 = +document.getElementById('d2m').value;
        if(y1 && y2) calcDetailed(new Date(y1, m1-1, d1), new Date(y2, m2-1, d2), 'resDiffMi');
    }

    function calcDetailed(start, end, id) {
        if (start > end) [start, end] = [end, start];
        
        let years = end.getFullYear() - start.getFullYear();
        let months = end.getMonth() - start.getMonth();
        let days = end.getDate() - start.getDate();

        if (days < 0) {
            months--;
            let prevMonthLastDay = new Date(end.getFullYear(), end.getMonth(), 0).getDate();
            days += prevMonthLastDay;
        }
        if (months < 0) {
            years--;
            months += 12;
        }

        const totalDays = Math.ceil(Math.abs(end - start) / (1000 * 60 * 60 * 24));
        show(id, `â± ÙØ§ØµÙ„Ù‡ Ú©Ù„: ${totalDays} Ø±ÙˆØ² <br> ğŸ—“ Ù…Ø¹Ø§Ø¯Ù„: <span class="highlight">${years}</span> Ø³Ø§Ù„ Ùˆ <span class="highlight">${months}</span> Ù…Ø§Ù‡ Ùˆ <span class="highlight">${days}</span> Ø±ÙˆØ²`);
    }

    function show(id, html) { 
        const el = document.getElementById(id); 
        el.innerHTML = html; el.style.display = 'block'; 
    }
</script>

</body>
</html>
